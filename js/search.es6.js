!function(){"use strict";var e,t={6820:function(e,t){t.Z=class{constructor(e,t){let{useArrowKeys:n=!0}=void 0===t?{}:t;this.menu=e,this.menuSections=[],this.openIndex=null,this.useArrowKeys=n,this.topLevelItems=Array.from(this.menu.querySelectorAll("button[aria-expanded][aria-controls]")),this.useArrowKeys&&(this.topLevelItems=[...this.topLevelItems,...Array.from(this.menu.querySelectorAll("a.js-top-level"))]),this.handleClickAnywhere=this.handleClickAnywhere.bind(this),this.handleKeydownAnywhere=this.handleKeydownAnywhere.bind(this)}toggleSection(e,t){t?(e.hidden=!0,e.setAttribute("aria-hidden","true")):(e.hidden=!e.hidden,e.hidden?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")),e.setAttribute("tabindex",e.hidden?"-1":"0");const n=e.querySelectorAll("button, [href], input, select, textarea, [tabindex]");n.forEach((t=>{t.tabIndex=e.hidden?-1:0})),e.hidden||n[0].focus()}toggleExpand(e,t){this.openIndex!==e&&this.toggleExpand(this.openIndex,!1),this.topLevelItems[e]&&(null===this.openIndex&&this.openMenu(),this.openIndex=t?e:null,this.topLevelItems[e].setAttribute("aria-expanded",t?"true":"false"),this.toggleSection(this.menuSections[e],!t),null===this.openIndex&&this.closeMenu())}controlFocusByKey(e,t,n){switch(e.key){case"ArrowUp":case"ArrowLeft":if(document.activeElement.matches("input"))return;if(e.preventDefault(),n>-1){t[Math.max(0,n-1)].focus()}break;case"ArrowDown":case"ArrowRight":if(document.activeElement.matches("input"))return;if(e.preventDefault(),n>-1){t[Math.min(t.length-1,n+1)].focus()}break;case"Home":e.preventDefault(),t[0].focus();break;case"End":e.preventDefault(),t[t.length-1].focus()}}handleSectionKeydown(e){if(null===this.openIndex||!this.useArrowKeys)return;const t=[...this.menuSections[this.openIndex].querySelectorAll("a, button")],n=t.indexOf(document.activeElement);this.controlFocusByKey(e,t,n)}handleButtonClick(e){const{currentTarget:t}=e,n=this.topLevelItems.indexOf(t);this.toggleExpand(n,"true"!==t.getAttribute("aria-expanded"))}handleButtonKeydown(e){if(!this.useArrowKeys)return;const t=this.topLevelItems.indexOf(document.activeElement);this.openIndex===t&&"ArrowDown"===e.key?(e.preventDefault(),this.menuSections[this.openIndex].querySelector("a, button").focus()):this.controlFocusByKey(e,this.topLevelItems,t)}handleLinkKeydown(e){if(!this.useArrowKeys)return;const t=this.topLevelItems.indexOf(document.activeElement);this.controlFocusByKey(e,this.topLevelItems,t)}handleCloseClick(e){e.preventDefault(),this.toggleExpand(this.openIndex,!1)}prepSection(e){const t=e.parentNode.querySelector(".c-search__form");if(!t)return;const n=t.querySelector(".c-search__form-close");this.menuSections.push(t),e.setAttribute("aria-expanded","false"),this.toggleSection(t,!0),t.addEventListener("keydown",this.handleSectionKeydown.bind(this)),e.addEventListener("click",this.handleButtonClick.bind(this)),e.addEventListener("keydown",this.handleButtonKeydown.bind(this)),n.addEventListener("click",this.handleCloseClick.bind(this)),t.setAttribute("aria-hidden","true")}prepLink(e){this.menuSections.push(null),e.addEventListener("keydown",this.handleLinkKeydown.bind(this))}handleClickAnywhere(e){this.menu.contains(e.target)||(this.toggleExpand(this.openIndex,!1),this.closeMenu())}handleKeydownAnywhere(e){const{key:t,shiftKey:n}=e;if("Escape"===t&&null!==this.openIndex)this.menuSections[this.openIndex].focus(),this.toggleExpand(this.openIndex,!1),this.closeMenu();else if("Tab"===t)if(null!==this.openIndex){const t=Array.from(this.menuSections[this.openIndex].querySelectorAll("button, [href], input, select, textarea, iframe")).filter((e=>-1!==e.tabIndex)),i=t.length,o=t[0],s=t[i-1];n&&document.activeElement===o?(e.preventDefault(),s.focus()):document.activeElement!==s||n||(e.preventDefault(),o.focus())}else setTimeout((()=>{if(document.activeElement.classList.contains("js-top-level")){const e=this.menu.querySelector('button[aria-expanded="true"]');if(e){const t=this.topLevelItems.indexOf(e);this.toggleExpand(t,!1)}}}),0)}closeMenu(){window.removeEventListener("click",this.handleClickAnywhere),window.removeEventListener("keydown",this.handleKeydownAnywhere),document.body.classList.remove("has-open-menu")}openMenu(){window.addEventListener("click",this.handleClickAnywhere),window.addEventListener("keydown",this.handleKeydownAnywhere),document.body.classList.add("has-open-menu")}init(){this.topLevelItems.forEach((e=>{"BUTTON"===e.tagName?this.prepSection(e):this.prepLink(e)}))}}},1365:function(e,t,n){var i=Drupal,o=n.n(i),s=once,r=n.n(s),a=drupalSettings,h=n.n(a),c=n(6820);o().behaviors.search={attach(e){r()("search-dropdown-init",".c-search--dropdown",e).forEach((e=>{new c.Z(e).init()}));e.querySelectorAll(".c-search__form").forEach((e=>{const t=e.querySelector(".c-search__input"),n=e.querySelectorAll('input[name="search_type"]'),i=e.querySelector(".c-search__hidden");function o(){const n=this.value;let o=`${h().maskedPath||""}/search`,s="keywords";i.innerHTML="","people"===n&&(o="https://www-public.slac.stanford.edu/phonebook/dirsearch.aspx",s="NAME",i.insertAdjacentHTML("beforeend",'<input type="hidden" name="lf" value="1" /><input type="hidden" name="url" value="" /><input type="hidden" name="gone" value="active" />')),t.setAttribute("name",s),e.setAttribute("action",o)}n.length&&(n.forEach((e=>{e.addEventListener("change",o)})),n[0].dispatchEvent(new InputEvent("change")),n[0].checked=!0)}))}}}},n={};function i(e){var o=n[e];if(void 0!==o)return o.exports;var s=n[e]={exports:{}};return t[e](s,s.exports,i),s.exports}i.m=t,e=[],i.O=function(t,n,o,s){if(!n){var r=1/0;for(d=0;d<e.length;d++){n=e[d][0],o=e[d][1],s=e[d][2];for(var a=!0,h=0;h<n.length;h++)(!1&s||r>=s)&&Object.keys(i.O).every((function(e){return i.O[e](n[h])}))?n.splice(h--,1):(a=!1,s<r&&(r=s));if(a){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[n,o,s]},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.j=9499,function(){var e={9499:0,8915:0};i.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,s,r=n[0],a=n[1],h=n[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(o in a)i.o(a,o)&&(i.m[o]=a[o]);if(h)var d=h(i)}for(t&&t(n);c<r.length;c++)s=r[c],i.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return i.O(d)},n=self.webpackChunkgesso=self.webpackChunkgesso||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var o=i.O(void 0,[9523],(function(){return i(1365)}));o=i.O(o)}();